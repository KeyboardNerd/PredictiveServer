
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><title>Python: module baseenv</title>
<meta charset="utf-8">
</head><body bgcolor="#f0f0f8">

<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="heading">
<tr bgcolor="#7799ee">
<td valign=bottom>&nbsp;<br>
<font color="#ffffff" face="helvetica, arial">&nbsp;<br><big><big><strong>baseenv</strong></big></big></font></td
><td align=right valign=bottom
><font color="#ffffff" face="helvetica, arial"><a href=".">index</a><br><a href="file:/Users/Sida/Dev/PredictiveServer-dev/engine/baseenv.py">/Users/Sida/Dev/PredictiveServer-dev/engine/baseenv.py</a></font></td></tr></table>
    <p></p>
<p>
<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="section">
<tr bgcolor="#aa55cc">
<td colspan=3 valign=bottom>&nbsp;<br>
<font color="#ffffff" face="helvetica, arial"><big><strong>Modules</strong></big></font></td></tr>
    
<tr><td bgcolor="#aa55cc"><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt></td><td>&nbsp;</td>
<td width="100%"><table width="100%" summary="list"><tr><td width="25%" valign=top><a href="bayes.html">bayes</a><br>
<a href="numpy.html">numpy</a><br>
</td><td width="25%" valign=top><a href="pickle.html">pickle</a><br>
<a href="matplotlib.pyplot.html">matplotlib.pyplot</a><br>
</td><td width="25%" valign=top><a href="re.html">re</a><br>
</td><td width="25%" valign=top></td></tr></table></td></tr></table><p>
<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="section">
<tr bgcolor="#ee77aa">
<td colspan=3 valign=bottom>&nbsp;<br>
<font color="#ffffff" face="helvetica, arial"><big><strong>Classes</strong></big></font></td></tr>
    
<tr><td bgcolor="#ee77aa"><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt></td><td>&nbsp;</td>
<td width="100%"><dl>
<dt><font face="helvetica, arial"><a href="baseenv.html#BaseEnv">BaseEnv</a>
</font></dt></dl>
 <p>
<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="section">
<tr bgcolor="#ffc8d8">
<td colspan=3 valign=bottom>&nbsp;<br>
<font color="#000000" face="helvetica, arial"><a name="BaseEnv">class <strong>BaseEnv</strong></a></font></td></tr>
    
<tr bgcolor="#ffc8d8"><td rowspan=2><tt>&nbsp;&nbsp;&nbsp;</tt></td>
<td colspan=2><tt>class&nbsp;<a href="#BaseEnv">BaseEnv</a>&nbsp;provides&nbsp;basic&nbsp;access&nbsp;of&nbsp;loading,training&nbsp;functions&nbsp;for&nbsp;machine&nbsp;learning<br>&nbsp;</tt></td></tr>
<tr><td>&nbsp;</td>
<td width="100%">Methods defined here:<br>
<dl><dt><a name="BaseEnv-__init__"><strong>__init__</strong></a>(self)</dt></dl>

<dl><dt><a name="BaseEnv-append_data"><strong>append_data</strong></a>(self, data)</dt><dd><tt>@effect:&nbsp;vertically&nbsp;stack&nbsp;data&nbsp;to&nbsp;the&nbsp;end&nbsp;of&nbsp;self.<strong>data</strong>,&nbsp;if&nbsp;self.<strong>data</strong>&nbsp;is&nbsp;empty,&nbsp;then&nbsp;data&nbsp;will&nbsp;be&nbsp;copied&nbsp;into&nbsp;self.<strong>data</strong><br>
@parameters:&nbsp;data(numpy&nbsp;ndarray)<br>
@require:&nbsp;self.<strong>data</strong>&nbsp;and&nbsp;data's&nbsp;column&nbsp;dimension&nbsp;should&nbsp;match</tt></dd></dl>

<dl><dt><a name="BaseEnv-get_columns_info"><strong>get_columns_info</strong></a>(self, *columns)</dt><dd><tt>@return:&nbsp;a&nbsp;list&nbsp;of&nbsp;dictionaries&nbsp;representing&nbsp;the&nbsp;semantic&nbsp;meaning&nbsp;of&nbsp;corresponding&nbsp;column&nbsp;in&nbsp;matrix<br>
@param:&nbsp;requested&nbsp;columns,&nbsp;@seealso&nbsp;get_schema_info</tt></dd></dl>

<dl><dt><a name="BaseEnv-get_constant"><strong>get_constant</strong></a>(self)</dt><dd><tt>@return:&nbsp;copy&nbsp;of&nbsp;self.<strong>constant_dict</strong></tt></dd></dl>

<dl><dt><a name="BaseEnv-get_schema_info"><strong>get_schema_info</strong></a>(self, *columns)</dt><dd><tt>@return:&nbsp;the&nbsp;requested&nbsp;{key:&nbsp;value}&nbsp;for&nbsp;each&nbsp;value&nbsp;stored&nbsp;in&nbsp;self.<strong>variable_dict</strong>[key]<br>
@param:&nbsp;columns(&nbsp;list&nbsp;of&nbsp;string,&nbsp;list&nbsp;of&nbsp;requested&nbsp;keys&nbsp;)</tt></dd></dl>

<dl><dt><a name="BaseEnv-load_file"><strong>load_file</strong></a>(self, file_name, map_method, header_method<font color="#909090">=None</font>, header<font color="#909090">=None</font>)</dt><dd><tt>@return:&nbsp;returns&nbsp;a&nbsp;matrix&nbsp;of&nbsp;data&nbsp;contained&nbsp;in&nbsp;file&nbsp;with&nbsp;name&nbsp;"file_name"<br>
@effect:&nbsp;clean&nbsp;and&nbsp;set&nbsp;self.<strong>variable_dict</strong>&nbsp;to&nbsp;column&nbsp;information&nbsp;<br>
@parameters:&nbsp;file_name(&nbsp;string,&nbsp;name&nbsp;of&nbsp;the&nbsp;file&nbsp;want&nbsp;to&nbsp;load&nbsp;)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;map_method(&nbsp;function&nbsp;with&nbsp;one&nbsp;parameter,&nbsp;this&nbsp;will&nbsp;be&nbsp;mapped&nbsp;to&nbsp;each&nbsp;line&nbsp;in&nbsp;file&nbsp;body.&nbsp;It&nbsp;should&nbsp;retrun&nbsp;an&nbsp;array-like&nbsp;)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;header_method(&nbsp;function&nbsp;with&nbsp;one&nbsp;parameter,&nbsp;this&nbsp;will&nbsp;be&nbsp;used&nbsp;for&nbsp;parsing&nbsp;first&nbsp;line&nbsp;(header)&nbsp;in&nbsp;the&nbsp;file.&nbsp;If&nbsp;it's&nbsp;None,&nbsp;then&nbsp;we&nbsp;assume&nbsp;that&nbsp;the&nbsp;file&nbsp;contains&nbsp;no&nbsp;header)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;header&nbsp;(&nbsp;list&nbsp;of&nbsp;string,&nbsp;header&nbsp;contains&nbsp;the&nbsp;semantic&nbsp;meaning&nbsp;of&nbsp;each&nbsp;column&nbsp;in&nbsp;returend&nbsp;matrix)</tt></dd></dl>

<dl><dt><a name="BaseEnv-set_constant"><strong>set_constant</strong></a>(self, **constants)</dt><dd><tt>@effect:&nbsp;add&nbsp;constant_dict&nbsp;with&nbsp;the&nbsp;key&nbsp;value&nbsp;pairs&nbsp;defined&nbsp;in&nbsp;constants<br>
@param:&nbsp;constants(dictionary,&nbsp;the&nbsp;key&nbsp;value&nbsp;pairs&nbsp;to&nbsp;be&nbsp;added&nbsp;to&nbsp;self.<strong>constant_dict</strong>)</tt></dd></dl>

<dl><dt><a name="BaseEnv-set_data"><strong>set_data</strong></a>(self, data)</dt><dd><tt>@effect:&nbsp;self.<strong>data</strong>&nbsp;is&nbsp;set&nbsp;to&nbsp;copy&nbsp;of&nbsp;data<br>
@param:&nbsp;data(numpy&nbsp;ndarray)</tt></dd></dl>

<dl><dt><a name="BaseEnv-train_estimator"><strong>train_estimator</strong></a>(self, estimator)</dt><dd><tt>train&nbsp;a&nbsp;estimator,&nbsp;which&nbsp;has&nbsp;function&nbsp;fit(feature,&nbsp;label)&nbsp;for&nbsp;training&nbsp;the&nbsp;estimator<br>
@return&nbsp;a&nbsp;trained&nbsp;estimator<br>
@param:&nbsp;estimator(a&nbsp;class/module&nbsp;with&nbsp;function&nbsp;fit(feature,&nbsp;label)&nbsp;for&nbsp;training&nbsp;itself)</tt></dd></dl>

<dl><dt><a name="BaseEnv-transform"><strong>transform</strong></a>(self, transformer, **parameters)</dt><dd><tt>@return:&nbsp;return&nbsp;value&nbsp;in&nbsp;transformer<br>
@param:&nbsp;transformer(&nbsp;a&nbsp;function&nbsp;with&nbsp;parameter(self.<strong>data</strong>),&nbsp;parameters&nbsp;)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;parameters(&nbsp;a&nbsp;dictionary&nbsp;of&nbsp;parameters&nbsp;required&nbsp;in&nbsp;transformer)</tt></dd></dl>

<dl><dt><a name="BaseEnv-update_variable_info"><strong>update_variable_info</strong></a>(self, **info)</dt><dd><tt>@effect:&nbsp;update&nbsp;key&nbsp;value&nbsp;pairs&nbsp;stored&nbsp;in&nbsp;self.<strong>variable_dict</strong><br>
@param:&nbsp;info(dictionary,&nbsp;key&nbsp;value&nbsp;pairs&nbsp;to&nbsp;be&nbsp;used&nbsp;to&nbsp;update&nbsp;self.<strong>variable_dict</strong>)</tt></dd></dl>

<hr>
Static methods defined here:<br>
<dl><dt><a name="BaseEnv-feature_label_transformer"><strong>feature_label_transformer</strong></a>(npmatrix, **parameters)</dt><dd><tt>first&nbsp;it&nbsp;generates&nbsp;label,&nbsp;feature&nbsp;transformer&nbsp;based&nbsp;on&nbsp;parameters&nbsp;and&nbsp;apply&nbsp;the&nbsp;transformer&nbsp;to&nbsp;each&nbsp;row&nbsp;in&nbsp;npmatrix<br>
@return&nbsp;a&nbsp;dictionary&nbsp;with&nbsp;{"label":&nbsp;label&nbsp;matrix,&nbsp;"feature":&nbsp;feature&nbsp;matrix}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
@param:&nbsp;npmatrix(&nbsp;ndarray,&nbsp;the&nbsp;data&nbsp;to&nbsp;be&nbsp;transformed&nbsp;)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;parameters:&nbsp;(&nbsp;dictionary&nbsp;with&nbsp;required&nbsp;fields:&nbsp;schema&nbsp;(the&nbsp;schema&nbsp;of&nbsp;npmatrix),&nbsp;constant&nbsp;(constant&nbsp;used&nbsp;in&nbsp;feature,label&nbsp;transformation),&nbsp;features&nbsp;(a&nbsp;list&nbsp;of&nbsp;string&nbsp;defining&nbsp;the&nbsp;transformer&nbsp;),&nbsp;labels&nbsp;(&nbsp;a&nbsp;list&nbsp;of&nbsp;string&nbsp;defining&nbsp;the&nbsp;transformer&nbsp;)&nbsp;)</tt></dd></dl>

<dl><dt><a name="BaseEnv-generate_transformer"><strong>generate_transformer</strong></a>(feature_list, schema, constant)</dt><dd><tt>@return&nbsp;lambda&nbsp;expression&nbsp;which&nbsp;will&nbsp;transform&nbsp;a&nbsp;matrix/ndarray/array-like&nbsp;to&nbsp;np.array.&nbsp;Every&nbsp;element&nbsp;is&nbsp;defined&nbsp;by&nbsp;feature_list<br>
@param:&nbsp;feature_list(list&nbsp;of&nbsp;special&nbsp;string:&nbsp;each&nbsp;string&nbsp;contains&nbsp;'{var}'&nbsp;to&nbsp;identify&nbsp;var&nbsp;as&nbsp;a&nbsp;variable,&nbsp;and&nbsp;each&nbsp;string&nbsp;complies&nbsp;to&nbsp;python&nbsp;grammar)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;schema&nbsp;(&nbsp;dictionary&nbsp;of&nbsp;schematic&nbsp;meaning&nbsp;representing&nbsp;each&nbsp;column&nbsp;of&nbsp;the&nbsp;matrix/ndarry&nbsp;to&nbsp;be&nbsp;transformed)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;constant&nbsp;(&nbsp;dictionary&nbsp;of&nbsp;var:&nbsp;number,&nbsp;representing&nbsp;the&nbsp;constants&nbsp;involved&nbsp;in&nbsp;the&nbsp;feature_list)</tt></dd></dl>

<dl><dt><a name="BaseEnv-unit_transformer"><strong>unit_transformer</strong></a>(npmatrix, **parameters)</dt><dd><tt>@return:&nbsp;return&nbsp;a&nbsp;numpy&nbsp;matrix,&nbsp;which&nbsp;is&nbsp;the&nbsp;matrix&nbsp;with&nbsp;converted&nbsp;unit<br>
@param:&nbsp;npmatrix(&nbsp;a&nbsp;ndarray&nbsp;)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;parameters&nbsp;(dictionary&nbsp;with&nbsp;at&nbsp;least&nbsp;fields&nbsp;"schema",&nbsp;"units",&nbsp;schema&nbsp;is&nbsp;schema_info&nbsp;defined&nbsp;in&nbsp;Env,&nbsp;including&nbsp;origin&nbsp;units,&nbsp;units&nbsp;is&nbsp;a&nbsp;dictionary&nbsp;with&nbsp;key&nbsp;in&nbsp;schema,&nbsp;representing&nbsp;the&nbsp;result&nbsp;unit)</tt></dd></dl>

</td></tr></table></td></tr></table><p>
<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="section">
<tr bgcolor="#eeaa77">
<td colspan=3 valign=bottom>&nbsp;<br>
<font color="#ffffff" face="helvetica, arial"><big><strong>Functions</strong></big></font></td></tr>
    
<tr><td bgcolor="#eeaa77"><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt></td><td>&nbsp;</td>
<td width="100%"><dl><dt><a name="-load_estimator"><strong>load_estimator</strong></a>(filename, to_json<font color="#909090">=False</font>, estimator_initializer<font color="#909090">=None</font>)</dt><dd><tt>load&nbsp;an&nbsp;estimator,&nbsp;estimator&nbsp;feature&nbsp;transformer,&nbsp;constants&nbsp;from&nbsp;file&nbsp;with&nbsp;name&nbsp;filename<br>
@param:&nbsp;filename&nbsp;(string,&nbsp;the&nbsp;file&nbsp;name)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;to_json&nbsp;(bool,&nbsp;is&nbsp;the&nbsp;estimator&nbsp;a&nbsp;json&nbsp;string?)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;estimator_initializer&nbsp;(function,&nbsp;should&nbsp;we&nbsp;initialize&nbsp;a&nbsp;instance&nbsp;of&nbsp;estimator&nbsp;and&nbsp;load&nbsp;json&nbsp;file?)<br>
@return:&nbsp;a&nbsp;tuple&nbsp;containing&nbsp;estimator,&nbsp;estimator&nbsp;feature&nbsp;transformer&nbsp;list,&nbsp;constants</tt></dd></dl>
 <dl><dt><a name="-save_estimator"><strong>save_estimator</strong></a>(filename, estimator, features, constants, to_json<font color="#909090">=False</font>)</dt><dd><tt>save&nbsp;one&nbsp;estimator,&nbsp;estimator&nbsp;feature&nbsp;transformer&nbsp;list,&nbsp;constants&nbsp;to&nbsp;a&nbsp;pickle&nbsp;binary&nbsp;file<br>
@param:&nbsp;filename&nbsp;(&nbsp;string,&nbsp;the&nbsp;file&nbsp;name)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;estimator&nbsp;(&nbsp;scikit&nbsp;model,&nbsp;trained&nbsp;estimator&nbsp;)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;features&nbsp;(&nbsp;list&nbsp;of&nbsp;strings,&nbsp;defining&nbsp;how&nbsp;to&nbsp;compute&nbsp;input&nbsp;matrix&nbsp;from&nbsp;raw&nbsp;matrix)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;constants&nbsp;(&nbsp;dictionary&nbsp;of&nbsp;string:&nbsp;number&nbsp;pair,&nbsp;the&nbsp;values&nbsp;used&nbsp;in&nbsp;features&nbsp;if&nbsp;it&nbsp;appears&nbsp;as&nbsp;constant)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;to_json&nbsp;(&nbsp;call&nbsp;to_json&nbsp;function&nbsp;in&nbsp;estimator&nbsp;to&nbsp;save&nbsp;the&nbsp;serialized&nbsp;version&nbsp;of&nbsp;estimator)<br>
@effect:&nbsp;create&nbsp;or&nbsp;replace&nbsp;a&nbsp;file&nbsp;named&nbsp;filename,&nbsp;containing&nbsp;information&nbsp;about&nbsp;estimator,&nbsp;features&nbsp;and&nbsp;constants,&nbsp;which&nbsp;can&nbsp;be&nbsp;retrieved&nbsp;by&nbsp;pickle.load</tt></dd></dl>
</td></tr></table>
</body></html>